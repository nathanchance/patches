From 591c7c6022196c7e60e858d2d8920ae6e97273ed Mon Sep 17 00:00:00 2001
From: Nathan Chancellor <nathan@kernel.org>
Date: Thu, 6 Apr 2023 09:04:45 -0700
Subject: [PATCH 1/9] WIP: kbuild: Enable
 -Wincompatible-function-pointer-types-strict

Signed-off-by: Nathan Chancellor <nathan@kernel.org>
---
 Makefile                 | 1 +
 drivers/counter/Makefile | 2 ++
 2 files changed, 3 insertions(+)

diff --git a/Makefile b/Makefile
index 5aeea3d98fc0..635e2fe96fac 100644
--- a/Makefile
+++ b/Makefile
@@ -1070,6 +1070,7 @@ KBUILD_CFLAGS   += -Werror=date-time
 
 # enforce correct pointer usage
 KBUILD_CFLAGS   += $(call cc-option,-Werror=incompatible-pointer-types)
+KBUILD_CFLAGS   += $(call cc-option,-Werror=incompatible-function-pointer-types-strict)
 
 # Require designated initializers for all marked structures
 KBUILD_CFLAGS   += $(call cc-option,-Werror=designated-init)
diff --git a/drivers/counter/Makefile b/drivers/counter/Makefile
index b9a369e0d4fc..c08115763c80 100644
--- a/drivers/counter/Makefile
+++ b/drivers/counter/Makefile
@@ -3,6 +3,8 @@
 # Makefile for Counter devices
 #
 
+ccflags-remove-y := -Werror=incompatible-function-pointer-types-strict
+
 obj-$(CONFIG_COUNTER) += counter.o
 counter-y := counter-core.o counter-sysfs.o counter-chrdev.o
 

base-commit: e3342532ecd39bbd9c2ab5b9001cec1589bc37e9
-- 
2.40.0


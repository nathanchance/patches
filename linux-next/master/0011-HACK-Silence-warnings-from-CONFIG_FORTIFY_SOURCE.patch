From bec99c2440a70d5103992ed60411477421d8356a Mon Sep 17 00:00:00 2001
From: Nathan Chancellor <nathan@kernel.org>
Date: Mon, 6 Jun 2022 13:11:07 -0700
Subject: [PATCH 11/15] HACK: Silence warnings from CONFIG_FORTIFY_SOURCE

Link: https://github.com/ClangBuiltLinux/linux/issues/1592
Signed-off-by: Nathan Chancellor <nathan@kernel.org>
---
 drivers/net/wireguard/netlink.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/net/wireguard/netlink.c b/drivers/net/wireguard/netlink.c
index d0f3b6d7f408..c80315b4d377 100644
--- a/drivers/net/wireguard/netlink.c
+++ b/drivers/net/wireguard/netlink.c
@@ -443,7 +443,7 @@ static int set_peer(struct wg_device *wg, struct nlattr **attrs)
 		     addr->sa_family == AF_INET6)) {
 			struct endpoint endpoint = { { { 0 } } };
 
-			memcpy(&endpoint.addr, addr, len);
+			unsafe_memcpy(&endpoint.addr, addr, len, "clang -O3 warns");
 			wg_socket_set_peer_endpoint(peer, &endpoint);
 		}
 	}
-- 
2.37.1


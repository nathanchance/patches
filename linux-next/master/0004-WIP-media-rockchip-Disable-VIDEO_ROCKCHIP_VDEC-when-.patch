From 7dc096c8e230a424e1cd324458e51ffe89113b15 Mon Sep 17 00:00:00 2001
From: Nathan Chancellor <nathan@kernel.org>
Date: Mon, 26 Jan 2026 23:01:12 -0700
Subject: [PATCH 04/10] WIP: media: rockchip: Disable VIDEO_ROCKCHIP_VDEC when
 targeting Hexagon

Link: https://github.com/llvm/llvm-project/issues/178535
Signed-off-by: Nathan Chancellor <nathan@kernel.org>
---
 drivers/media/platform/rockchip/rkvdec/Kconfig | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/drivers/media/platform/rockchip/rkvdec/Kconfig b/drivers/media/platform/rockchip/rkvdec/Kconfig
index 5f3bdd848a2c..d03689464206 100644
--- a/drivers/media/platform/rockchip/rkvdec/Kconfig
+++ b/drivers/media/platform/rockchip/rkvdec/Kconfig
@@ -1,7 +1,8 @@
 # SPDX-License-Identifier: GPL-2.0
 config VIDEO_ROCKCHIP_VDEC
 	tristate "Rockchip Video Decoder driver"
-	depends on ARCH_ROCKCHIP || COMPILE_TEST
+	# !HEXAGON: https://github.com/llvm/llvm-project/issues/178535
+	depends on ARCH_ROCKCHIP || (COMPILE_TEST && !HEXAGON)
 	depends on VIDEO_DEV
 	select MEDIA_CONTROLLER
 	select VIDEOBUF2_DMA_CONTIG
-- 
2.52.0

